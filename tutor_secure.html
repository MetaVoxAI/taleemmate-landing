<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø²Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ… - TaleemMate</title>
  <style>
    body { font-family: 'Segoe UI', 'Arial', sans-serif; background: linear-gradient(to left, #e3f0ff, #f7fafd 80%); margin: 0; padding: 0; direction: rtl; min-height: 100vh; }
    header { background: linear-gradient(to right, #007bff, #0066cc 90%); color: white; padding: 24px 10px 10px 10px; text-align: center; border-radius: 0 0 32px 32px; box-shadow: 0 4px 24px 0 rgba(0,0,0,0.08); }
    nav { padding: 14px; text-align: center; background: #f3f8fb; box-shadow: 0 2px 8px 0 rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 2; border-bottom: 1px solid #e1eaf2; }
    nav button { margin: 0 8px; padding: 8px 18px; font-weight: 500; border: none; border-radius: 10px; background: #007bff; color: white; font-size: 1em; cursor: pointer; transition: background 0.25s, box-shadow 0.25s; box-shadow: 0 1px 4px #b2c7e6a0; }
    nav button:hover { background: #0057a3; }
    .container { max-width: 600px; margin: 32px auto 0 auto; background: #fff; border-radius: 22px; box-shadow: 0 8px 32px 0 rgba(128, 180, 220, 0.12); padding: 30px 20px; position: relative; z-index: 1; }
    .container h2 { color: #007bff; font-size: 1.45em; margin-bottom: 12px; }
    select, input[type=text], input[type=email], input[type=password] { margin: 10px 0; padding: 13px 10px; border-radius: 7px; border: 1px solid #c1dbf6; width: 96%; font-size: 1em; transition: border 0.2s; background: #f8fbff; }
    select:focus, input:focus { border-color: #007bff; background: #eef6ff; }
    .submit-btn { margin-top: 14px; padding: 13px 36px; border-radius: 8px; border: none; background: #007bff; color: white; font-weight: 600; font-size: 1.07em; cursor: pointer; transition: background 0.22s; }
    .submit-btn:hover { background: #0057a3; }
    .answer { background: #ecf6ff; color: #1d3974; margin-top: 23px; padding: 18px; border-radius: 10px; min-height: 46px; font-size: 1.1em; box-shadow: 0 2px 12px 0 rgba(60, 80, 130, 0.05); transition: background 0.3s; word-break: break-word; text-align: right; line-height: 1.6; }
    #ai-answer.loading { background: #e3f0ff; color: #6c85b3; font-style: italic; animation: fadeinout 1.5s linear infinite alternate; }
    @keyframes fadeinout { 0% { opacity: 1; } 100% { opacity: 0.6; } }
    @media (max-width: 600px) { .container { padding: 13px 4px; border-radius: 0; } }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    <h1 id="main-title">Ø²Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ… - TaleemMate</h1>
    <p id="main-desc">Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø·ÙØ§Ù„ Ù…Ù† Ø§Ù„Ø±ÙˆØ¶Ø© Ø­ØªÙ‰ Ø§Ù„ØµÙ 12</p>
  </header>
  <nav>
    <button onclick="showLogin()" id="login-nav-btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
    <button onclick="logout()" id="logout-btn" style="display:none">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    <button onclick="showDashboard()" id="dashboard-btn" style="display:none">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</button>
    <button onclick="showAdminPanel()" id="admin-btn" style="display:none">Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù</button>
    <button onclick="toggleLanguage()" id="lang-btn">ğŸŒ Ø§Ù„Ù„ØºØ© / Language</button>
    <span id="user-email"></span>
  </nav>
  <div class="container" id="ask-section">
    <h2 id="ask-title">âœï¸ Ø§Ø³Ø£Ù„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ</h2>
    <select id="subject">
      <option value="math">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
      <option value="science">Ø¹Ù„ÙˆÙ…</option>
      <option value="arabic">Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©</option>
      <option value="english">Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
    </select>
    <select id="grade">
      <option value="KG">Ø§Ù„Ø±ÙˆØ¶Ø©</option>
      <option value="1">Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„</option>
      <option value="2">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ</option>
      <option value="3">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«</option>
      <option value="4">Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹</option>
      <option value="5">Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</option>
      <option value="6">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³</option>
      <option value="7">Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¨Ø¹</option>
      <option value="8">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù…Ù†</option>
      <option value="9">Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹</option>
      <option value="10">Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±</option>
      <option value="11">Ø§Ù„ØµÙ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±</option>
      <option value="12">Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±</option>
    </select>
    <input type="text" id="question-input" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." />
    <button class="submit-btn" onclick="submitQuestion()" id="submit-btn">Ø¥Ø±Ø³Ø§Ù„</button>
    <div id="ai-answer" class="answer"></div>
  </div>

  <!-- Login, Dashboard, Admin-Panel etc remain unchanged -->

  <script>
    // --- Language UI & storage ---
    const langLabels = {
      ar: {
        title: "Ø²Ù…ÙŠÙ„ Ø§Ù„ØªØ¹Ù„ÙŠÙ… - TaleemMate",
        desc: "Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ Ù„ØªØ¹Ù„ÙŠÙ… Ø§Ù„Ø£Ø·ÙØ§Ù„ Ù…Ù† Ø§Ù„Ø±ÙˆØ¶Ø© Ø­ØªÙ‰ Ø§Ù„ØµÙ 12",
        ask: "âœï¸ Ø§Ø³Ø£Ù„ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ",
        placeholder: "Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§...",
        submit: "Ø¥Ø±Ø³Ø§Ù„",
        login: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨",
        logout: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
        dashboard: "Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
        admin: "Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù",
        subject: ["Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ù„ÙˆÙ…", "Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©", "Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©"],
        grade: [
          "Ø§Ù„Ø±ÙˆØ¶Ø©","Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„","Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ","Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø«","Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹","Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³",
          "Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³","Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¨Ø¹","Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù…Ù†","Ø§Ù„ØµÙ Ø§Ù„ØªØ§Ø³Ø¹","Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø±","Ø§Ù„ØµÙ Ø§Ù„Ø­Ø§Ø¯ÙŠ Ø¹Ø´Ø±","Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø¹Ø´Ø±"
        ]
      },
      en: {
        title: "TaleemMate - AI Tutor",
        desc: "Smart assistant for students KG to Grade 12",
        ask: "âœï¸ Ask the Smart Tutor",
        placeholder: "Type your question here...",
        submit: "Submit",
        login: "Login / Create Account",
        logout: "Logout",
        dashboard: "Dashboard",
        admin: "Admin Panel",
        subject: ["Math", "Science", "Arabic", "English"],
        grade: [
          "KG","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5",
          "Grade 6","Grade 7","Grade 8","Grade 9","Grade 10","Grade 11","Grade 12"
        ]
      }
    };
    function setLangUI(lang) {
      const L = langLabels[lang];
      document.documentElement.lang = lang;
      document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";
      document.getElementById("main-title").innerText = L.title;
      document.getElementById("main-desc").innerText = L.desc;
      document.getElementById("ask-title").innerText = L.ask;
      document.getElementById("question-input").placeholder = L.placeholder;
      document.getElementById("submit-btn").innerText = L.submit;
      document.getElementById("login-nav-btn").innerText = L.login;
      document.getElementById("logout-btn").innerText = L.logout;
      document.getElementById("dashboard-btn").innerText = L.dashboard;
      document.getElementById("admin-btn").innerText = L.admin;
      // update subjects
      const s = document.getElementById("subject").options;
      for (let i = 0; i < s.length; ++i) s[i].text = L.subject[i];
      // update grades
      const g = document.getElementById("grade").options;
      for (let i = 0; i < g.length; ++i) g[i].text = L.grade[i];
    }
    function toggleLanguage() {
      const current = localStorage.getItem("lang") || "ar";
      const next = current === "ar" ? "en" : "ar";
      localStorage.setItem("lang", next);
      setLangUI(next);
    }
    window.onload = function() {
      setLangUI(localStorage.getItem("lang") || "ar");
    };
    // --- Demo Submit Question ---
    function submitQuestion() {
      const lang = document.documentElement.lang;
      const question = document.getElementById('question-input').value.trim();
      const aiAnswer = document.getElementById('ai-answer');
      aiAnswer.innerText = '';
      aiAnswer.classList.remove('loading');
      if (!question) return alert(lang === "ar" ? 'ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„.' : 'Please enter a question.');
      aiAnswer.innerText = lang === 'ar' ? '...Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©' : 'Generating answer...';
      aiAnswer.classList.add('loading');
      setTimeout(() => {
        aiAnswer.innerText = lang === "ar" ? `Ø¥Ø¬Ø§Ø¨Ø© Ù„Ù„Ø³Ø¤Ø§Ù„: ${question}` : `Answer to: ${question}`;
        aiAnswer.classList.remove('loading');
      }, 1200);
    }
  </script>
</body>
</html>
